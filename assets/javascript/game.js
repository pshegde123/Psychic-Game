/* 
Create an array of letters from lowercase 'a' to 'z'
*/
var computerChoices = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
/*
At the start of the game set win count and loss count to 0.
charArray holds all the letters that user press on keyboard.
At start of the game empty the array. 
*/
charArray=[];
var userText = document.getElementById("guessedLetters");
var counter=0;
var lossCounter=0;

/*
Function returns true if guesses left are 9 - at the start of new game 
or guesses left are 0 - at the end of a game. 
*/
function isTimeToStartNewGame(){
    var countdown = document.getElementById("guessCount");
    if(countdown.textContent == 0 || countdown.textContent == 9){
        return true;
    }
    else{
        return false;
    }
}

/* 
Start a very first game. 
*/
function startNewGame(){
    winCounter = 0;
    lossCounter = 0;
    guessCounter = 9;
    charArray=[];
    var startWins=document.getElementById("winCount");
    startWins.textContent = winCounter;
    var startLosses = document.getElementById("lossCount");
    startLosses.textContent = lossCounter;
    var startGuessesLeft = document.getElementById("guessCount");
    startGuessesLeft.textContent = guessCounter;
}

/*
Replay the game.Reset guesses left to 9.
*/
function restartGame(){
    guessCounter = 9;
    charArray=[];
    var startGuessesLeft = document.getElementById("guessCount");
    startGuessesLeft.textContent = guessCounter;
}

/*
If the charater typed by user matches with the random character generated by computer,
increment win count by 1. If no match found during whole game, increment loss count by 1.
*/
function playGame(){
    var winFlag = false;
    
    document.onkeyup = function(event)
    {
        
        // append the typed character to charArray.
        var newChar = event.key;
        charArray.push(newChar);
        //Display all typed letters on page.
        userText.textContent = charArray.toString();
        console.log("Yout typed: ",userText.textContent);
        // Sets the randomChar variable equal to a random choice from the computerChoice array.
        var randomChar = computerChoices[Math.floor(Math.random() * computerChoices.length)];
        console.log("computer guessed =",randomChar);

        var guess = document.getElementById("guessCount");
        if(randomChar == newChar){
            var winCount = document.getElementById("winCount");
            winCounter ++;
            winCount.textContent = winCounter;
            winFlag = true;
            console.log("user won the game!")
            //Decrement the guessed letter count by 1 
            guess.textContent --;
        } 
        else 
        {
            //Decrement the guessed letter count by 1 
            guess.textContent --;
            if(guess.textContent == 0){
                if(winFlag==false){          
                    var lossCount = document.getElementById("lossCount");
                    lossCounter++;
                    lossCount.textContent = lossCounter;
                    console.log("computer won the game!")
                }
                winFlag = false;
                restartGame(); //After guess count reaches 0 ,replay the game.
            }//if(guess.textContent == 0)
        }
    } //event    
}


if(isTimeToStartNewGame()){
    console.log("Begin new game");
    startNewGame();
    playGame();    
}
else
{
    console.log("Restart the game");
    playGame();
}


